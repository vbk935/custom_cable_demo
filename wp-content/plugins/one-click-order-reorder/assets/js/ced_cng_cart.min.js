jQuery(document).ready(function(a){function e(a){jQuery.ajax({url:global_var.ajaxurl,data:{action:"get_order_cart",nonce_check:global_var.ajax_nonce,order_id:a},type:"post",success:function(a){window.location=global_var.cart_url}})}function c(e){jQuery.ajax({url:global_var.ajaxurl,data:{action:"get_oreder_products",order_id:e,ajax_nonce:global_var.ajax_nonce},type:"post",success:function(c){try{c=jQuery.parseJSON(c);var t=c.prodcuts,d=n(t,"order",e);a(document.body).prepend(d)}catch(o){console.log(o)}}})}function t(e,c,t,n){""==c&&(c="add_to_cart"),""==t&&(c="order");var _=[],i={};return e.is('[disabled="disabled"]')?!1:(a(document).find(".ced_cng_exclude_item").each(function(){a(this).is(":checked")&&_.push(a(this).val())}),a(document).find(".ced_cng_qty").each(function(){i[a(this).data("id")]=a(this).val()}),e.css("opacity","0.5"),e.attr("disabled","disabled"),void("order"==t?"add_to_cart"!=c&&d(n,_,i):"add_to_cart"==c&&o(_,i)))}function d(a,e,c){jQuery.ajax({url:global_var.ajaxurl,data:{action:"get_same_order_cart",ajax_nonce:global_var.ajax_nonce,order_id:a,excluded_products:e,quantities:c},type:"post",success:function(a){window.location=global_var.checkouturl}})}function o(e,c){a.ajax({url:global_var.ajaxurl,data:{action:"ced_ocor_add_basket_items_to_cart",ajax_nonce:global_var.ajax_nonce,excluded_items:e,quantities:c},type:"post",success:function(a){try{a.success?window.location=global_var.cart_url:console.log(a.data)}catch(e){console.log(e)}}})}a(".ced_my_account_reorder, .ced_my_account_place_same_order").each(function(){a(this).attr("data-order_id",a(this).attr("href").split("http://")[1]),a(this).attr("href","javascript:void(0);")}),a(".ced_my_account_reorder").on("click",function(){a(this).css("opacity","0.5");var c=a(this).data("order_id");e(c)}),a(document).on("click",".ced_my_account_place_same_order",function(){var e=a(this),t=e.data("order_id");e.css("opacity","0.5"),c(t)}),a(document).on("click",".ced_cng_placeorder",function(){var e=a(this),t=e.data("id");e.css("opacity","0.5"),c(t)});var n=function(a,e,c){""==e&&(e="order");var t="",d=Object.keys(a).length,o="";if((jQuery.isEmptyObject(a)||3>d)&&(t="ced_cng_no_content"),o='<div id="ced_cng_prodcts_exclude" class="ced_cng_popup-wrapper">',o+='<div class="ced_cng_popup-overlay">',o+='<div class="ced_cng_popup-container '+t+'">',o+='<div class="ced_cng_popup-heading">',o+="order"!=e||"basket"==e?"<h1><strong>"+global_var.exc_basket_item_head+"</strong></h1>":"<h1><strong>"+global_var.exclude_products_head+"</strong></h1>",o+='<a class="ced_cng_close ced_cng_close_wrapper">&times;</a>',o+="</div>",jQuery.isEmptyObject(a))o+='<img src="'+global_var.plugi_dir_url+'assets/images/not-found.png">';else{o+='<div class="ced_cng_popup-content">',o+='<div class="ced_cng_tbl_header">',o+='<div class="ced_cng_product_info">',o+='<div class="ced_cng_popup-column">',o+='<span class="ced_cng_heading_text">'+global_var.exclude+"</span>",o+="</div>",o+='<div class="ced_cng_popup-column">',o+='<span class="ced_cng_heading_text">'+global_var.image+"</span>",o+="</div>",o+='<div class="ced_cng_popup-column">',o+='<span class="ced_cng_heading_text">'+global_var.product_name+"</span>",o+="</div>",o+='<div class="ced_cng_popup-column">',o+='<span class="ced_cng_heading_text">'+global_var.stock+"</span>",o+="</div>",o+='<div class="ced_cng_popup-column">',o+='<span class="ced_cng_heading_text">'+global_var.quantity+"</span>",o+="</div>",o+="</div>",o+="</div>",o+='<div class="ced_cng_popup-content ced_cng_tbl_body">';for(var n in a)if(a.hasOwnProperty(n)){var _=a[n].title;availablity=a[n].availability,image=a[n].image,qty=a[n].qty,stock="out_of_stock"==a[n].stock?"Out of stock":"In stock",stockClass="out_of_stock"==a[n].stock?"ced_cng_txt_red":"ced_cng_txt_green",excluded="out_of_stock"==a[n].stock?"checked readonly":"",exclude_dsc="out_of_stock"==a[n].stock?global_var.out_of_stock_desc:global_var.exclude_desc,permalink=a[n].permalink,item_id="undefined"==a[n].item_id||"order"==e?n:a[n].item_id,"not_exist"!=availablity&&("available"==availablity?(o+='<div class="ced_cng_product_info ced_cng_product-'+item_id+'">',o+='<div class="ced_cng_popup-column">',o+='<input class="ced_cng_exclude_item" type="checkbox" value="'+item_id+'" '+excluded+' title="'+exclude_dsc+'">',o+="</div>",o+='<div class="ced_cng_popup-column">'+image+"</div>",o+='<div class="ced_cng_popup-column">',o+='<a href="'+permalink+'" target="_blank">'+_+"</a>","variable"==a[n].type&&(o+=a[n].attributes),o+="</div>",o+='<div class="ced_cng_popup-column"><span class="'+stockClass+'">'+stock+"</span></div>",o+='<div class="ced_cng_popup-column">',o+='<input step="1" min="1" max="" value="'+qty+'" data-id="'+item_id+'" onkeydown="return false" class="ced_cng_qty" size="4" pattern="[0-9]*" inputmode="numeric" type="number">',o+="</div>",o+="</div>"):(excluded="checked disabled",o+='<div class="ced_cng_product_info ced_cng_product-'+item_id+'">',o+='<div class="ced_cng_popup-column">',o+='<input class="ced_cng_exclude_item" type="checkbox" value="'+item_id+'" '+excluded+' title="'+exclude_dsc+'">',o+="</div>",o+='<div class="ced_cng_popup-column"><a href="'+permalink+'" class="ced_cng_strikethrough" target="_blank">'+_+"</a></div>",o+='<div class="ced_cng_popup-column"><span class="'+stockClass+'">'+stock+"</span></div>",o+='<div class="ced_cng_popup-column">',o+='<input step="1" min="1" max="" value="'+qty+'" data-id="'+item_id+'" onkeydown="return false" class="ced_cng_qty" size="4" pattern="[0-9]*" inputmode="numeric" type="number">',o+="</div>",o+="</div>"),d++)}0>=d&&(o+='<div class="ced_cng_product_info ced_cng_product-'+item_id+'">',o+='<div class="ced_cng_popup-no-product">',o+=global_var.product_not_exist,o+="</div>",o+="</div>"),o+="</div>",o+="</div>",o+='<div class="ced_cng_popup-buttons">',d>0&&(o+=""!=c&&"undefined"!=c&&"order"==e?'<a id="ced_cng_popup-submit-btn" class="ced_cng_popup-btn" data-order_id="'+c+'"><span>'+global_var.submit+"</span></a>":'<a id="ced_cng_popup_atc" class="ced_cng_popup-btn"><span>'+global_var.atc+"</span></a>"),o+="</div>"}return o+="</div>",o+="</div>",o+="</div>"};a(document).on("click","#ced_cng_popup-submit-btn",function(){var e=a(this),c=e.data("order_id");t(e,"checkout","order",c)}),a(document).on("click",".ced_cng_close_wrapper",function(){a(this).parents("#ced_cng_prodcts_exclude").remove(),a(document).find(".ced_ocor_floating_basket_wrapper").hasClass("disabled")&&a(document).find(".ced_ocor_floating_basket_wrapper").removeClass("disabled")}),a(".variation_id").length>0&&a(document).on("change",".variation_id",function(){var e=a(this);""!=e.val()&&"undefined"!=typeof e.val()?a(document).find('a[ data-variation_id="'+e.val()+'"]').length>0?(a(document).find(".ced_ocor_rfb").addClass("ced_cng_hide"),a(document).find('a[ data-variation_id="'+e.val()+'"]').removeClass("ced_cng_hide")):(a(document).find(".ced_ocor_rfb").addClass("ced_cng_hide"),a(document).find(".ced_ocor_atb").removeClass("ced_cng_hide")):(a(document).find(".ced_ocor_rfb").addClass("ced_cng_hide"),a(document).find(".ced_ocor_atb").addClass("ced_cng_hide"))}),a(document).on("click",".ced_ocor_atb",function(e){var c=a(this),t=c.data("id"),d=c.data("user_id"),o=c.data("type"),n=a('input[name="quantity"]').length>0&&"undefined"!=a('input[name="quantity"]').val()&&a('input[name="quantity"]').val()>0?a('input[name="quantity"]').val():1,_="";if(""==t||"undefined"==typeof t||""==d||"undefined"==typeof d)return!1;if("variable"==o){if(c.hasClass("ced_cng_hide"))return!1;if(_=a(".variation_id").val(),"undefined"==typeof _||""==_)return!1}c.addClass("loading"),a.ajax({url:global_var.ajaxurl,type:"POST",data:{action:"ced_ocor_add_to_basket",item_id:t,user_id:d,type:o,qty:n,variation_id:_,ajax_nonce:global_var.ajax_nonce},success:function(e){try{if(c.removeClass("loading"),e.success){a(document).find(".ced_ocor_floating_basket_wrapper").addClass("rubberBand animated"),setTimeout(function(){a(document).find(".ced_ocor_floating_basket_wrapper").removeClass("rubberBand animated")},1e3);var n=a(document).find(".ced_ocor_basket_item_count").data("total");if(n=parseInt(n),n+=1,a(document).find(".ced_ocor_basket_item_count").data("total",n).html(n),"variable"!=o){var _='<a rel="nofollow" class="ced_ocor_rfb button" id="ced_ocor_rfb_btn_'+t+'" href="javascript:void(0);" data-id="'+t+'" data-user_id="'+d+'" title="'+global_var.rfbBtnText+'">'+global_var.rfbBtnText+"</a>";c.parent("p.ced_ocor_basket").html(_)}else window.location=""}else window.location=""}catch(i){console.log(i)}}})}),a(document).on("click",".ced_ocor_rfb",function(e){var c=a(this),t=c.data("id"),d=c.data("user_id"),o="undefined"!=c.data("type")?c.data("type"):"",n="";return""==t||"undefined"==typeof t||""==d||"undefined"==typeof d?!1:"variable"==o&&(n=a(".variation_id").val(),"undefined"==typeof n||""==n)?!1:(c.addClass("loading"),void a.ajax({url:global_var.ajaxurl,type:"POST",data:{action:"ced_ocor_remove_from_basket",item_id:t,user_id:d,type:o,variation_id:n,ajax_nonce:global_var.ajax_nonce},success:function(e){try{if(c.removeClass("loading"),e.success){a(document).find(".ced_ocor_floating_basket_wrapper").addClass("rubberBand animated"),setTimeout(function(){a(document).find(".ced_ocor_floating_basket_wrapper").removeClass("rubberBand animated")},1e3);var n=a(document).find(".ced_ocor_basket_item_count").data("total");if(n=parseInt(n),n-=1,"variable"!=o){var _='<a rel="nofollow" class="ced_ocor_atb button" id="ced_ocor_atb_btn_'+t+'" href="javascript:void(0);" data-id="'+t+'" data-user_id="'+d+'" title="'+global_var.atbBtnText+'">'+global_var.atbBtnText+"</a>";a(document).find(".ced_ocor_basket_item_count").data("total",n).html(n),c.parent("p.ced_ocor_basket").html(_)}else window.location=""}else{var i='<span class="ced_ocor_atb_error">'+e.data+"</span>";c.parent("p.ced_ocor_basket").append(i)}}catch(s){console.log(s)}}}))}),a(".ced_ocor_floating_basket_wrapper").draggable({containment:"window"}),a(document).on("click",".ced_ocor_floating_basket_wrapper",function(){var e=a(this);e.find("ced_ocor_basket_item_count").data("total");return e.hasClass("disabled")?!1:(e.addClass("disabled"),void a.ajax({url:global_var.ajaxurl,data:{action:"ced_ocor_get_basket_items",ajax_nonce:global_var.ajax_nonce},type:"post",success:function(e){try{if(e.success){var c=e.data;popup=n(c,"basket"),a(document.body).prepend(popup)}else window.location=""}catch(t){console.log(t)}}}))}),a(document).on("click","#ced_cng_popup_atc",function(){var e=a(this);return e.hasClass("disabled")?!1:(e.addClass("disabled"),void t(e,"add_to_cart","basket"))})});