jQuery(document).ready(function(a){function e(e,i){a(".lwa-loading").remove(),i=a(i),!0===e.result?i.attr("class","lwa-status lwa-status-confirm").html(e.message):!1===e.result?(i.attr("class","lwa-status lwa-status-invalid").html(e.error),i.find("a").click(function(e){var i=a(this).parents(".lwa").find("form.lwa-remember");i.length>0&&(e.preventDefault(),i.show("slow"))})):i.attr("class","lwa-status lwa-status-invalid").html("An error has occured. Please try again.")}a("#LoginWithAjax").length>0&&(a("#LoginWithAjax").addClass("lwa"),a("#LoginWithAjax_Status").addClass("lwa-status"),a("#LoginWithAjax_Register").addClass("lwa-register"),a("#LoginWithAjax_Remember").addClass("lwa-remember"),a("#LoginWithAjax_Links_Remember").addClass("lwa-links-remember"),a("#LoginWithAjax_Links_Remember_Cancel").addClass("lwa-links-remember-cancel"),a("#LoginWithAjax_Form").addClass("lwa-form")),a("form.lwa-form, form.lwa-remember, div.lwa-register form").submit(function(i){i.preventDefault();var n=a(this),t=n.find(".lwa-status");0==t.length&&(t=a('<span class="lwa-status"></span>'),n.prepend(t));var l=n.find(".lwa-ajax");0==l.length&&(l=a('<input class="lwa-ajax" name="lwa" type="hidden" value="1" />'),n.prepend(l)),a('<div class="lwa-loading"></div>').prependTo(n);var s=n.attr("action");"undefined"!=typeof LWA&&(s=LWA.ajaxurl),a.ajax({type:"POST",url:s,data:n.serialize(),success:function(i){e(i,t),a(document).trigger("lwa_"+i.action,[i,n])},error:function(){e({},t)},dataType:"jsonp"})}),a(document).on("lwa_login",function(e,i,n){!0===i.result&&(null!=i.widget?a.get(i.widget,function(e){a(e);a(document).find("#menu-main").find("li a:contains('Login')").hide(),a(document).find("#menu-main").find("li a:contains('Log In')").hide();n.parent(".lwa").html("<div><p>Loggedin successfully. Resuming, please wait...</p>"),setTimeout(function(){a('button[data-dismiss="modal"]').click()},500)}):null==i.redirect?window.location.reload():window.location=i.redirect)}),a(".lwa-modal").each(function(e,i){var n=a(i);n.parents(".lwa").data("modal",n),a("body").append(a('<div class="lwa"></div>').append(n))}),a(document).on("click",".lwa-links-modal",function(e){var i=a(this).parents(".lwa").data("modal");void 0!==i&&i.length>0&&(e.preventDefault(),i.reveal({modalbgclass:"lwa-modal-bg",dismissmodalclass:"lwa-modal-close"}))}),a(".lwa-links-register-inline").click(function(e){var i=a(this).parents(".lwa").find(".lwa-register");i.length>0&&(e.preventDefault(),i.show("slow"),a(this).parents(".lwa").find(".lwa-remember").hide("slow"))}),a(".lwa-links-register-inline-cancel").click(function(e){e.preventDefault(),a(this).parents(".lwa-register").hide("slow")}),a(document).on("click",".lwa-links-remember",function(e){var i=a(this).parents(".lwa").find(".lwa-remember");i.length>0&&(e.preventDefault(),i.show("slow"),a(this).parents(".lwa").find(".lwa-register").hide("slow"))}),a(document).on("click",".lwa-links-remember-cancel",function(e){e.preventDefault(),a(this).parents(".lwa-remember").hide("slow")})}),function(a){a("a[data-reveal-id]").on("click",function(e){e.preventDefault();var i=a(this).attr("data-reveal-id");a("#"+i).reveal(a(this).data())}),a.fn.reveal=function(e){e=a.extend({},{animation:"fadeAndPop",animationspeed:300,closeonbackgroundclick:!0,dismissmodalclass:"close-reveal-modal",modalbgclass:"reveal-modal-bg"},e);return this.each(function(){var i=a(this),n=parseInt(i.css("top")),t=i.height()+n,l=!1,s=a("."+e.modalbgclass);0==s.length&&(s=a('<div class="'+e.modalbgclass+'" />').insertAfter(i)),0==i.find("."+e.dismissmodalclass).length&&i.append('<a class="'+e.dismissmodalclass+'">&#215;</a>'),i.bind("reveal:open",function(){s.unbind("click.modalEvent"),a("."+e.dismissmodalclass).unbind("click.modalEvent"),l||(d(),"fadeAndPop"==e.animation&&(i.css({top:a(document).scrollTop()-t,opacity:0,visibility:"visible",display:"block"}),s.fadeIn(e.animationspeed/2),i.delay(e.animationspeed/2).animate({top:a(document).scrollTop()+n+"px",opacity:1},e.animationspeed,o())),"fade"==e.animation&&(i.css({opacity:0,visibility:"visible",top:a(document).scrollTop()+n,display:"block"}),s.fadeIn(e.animationspeed/2),i.delay(e.animationspeed/2).animate({opacity:1},e.animationspeed,o())),"none"==e.animation&&(i.css({visibility:"visible",top:a(document).scrollTop()+n,display:"block"}),s.css({display:"block"}),o())),i.unbind("reveal:open")}),i.bind("reveal:close",function(){l||(d(),"fadeAndPop"==e.animation&&(s.delay(e.animationspeed).fadeOut(e.animationspeed),i.animate({top:a(document).scrollTop()-t+"px",opacity:0},e.animationspeed/2,function(){i.css({top:n,opacity:1,visibility:"hidden"}),o()})),"fade"==e.animation&&(s.delay(e.animationspeed).fadeOut(e.animationspeed),i.animate({opacity:0},e.animationspeed,function(){i.css({opacity:1,visibility:"hidden",top:n}),o()})),"none"==e.animation&&(i.css({visibility:"hidden",top:n}),s.css({display:"none"}))),i.unbind("reveal:close")}),i.trigger("reveal:open");a("."+e.dismissmodalclass).bind("click.modalEvent",function(){i.trigger("reveal:close")});function o(){l=!1}function d(){l=!0}e.closeonbackgroundclick&&(s.css({cursor:"pointer"}),s.bind("click.modalEvent",function(){i.trigger("reveal:close")})),a("body").keyup(function(a){27===a.which&&i.trigger("reveal:close")})})}}(jQuery);