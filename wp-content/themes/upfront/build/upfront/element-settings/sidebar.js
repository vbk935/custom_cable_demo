!function(e){upfrontrjs.define([],function(){e("body").append('<div id="element-settings-sidebar" />'),e("#element-settings-sidebar").width(0).css("opacity",0);var t,n,s,i=function(){if(t){t.cleanUp(),t=!1,e("#element-settings-sidebar").width(10).css("opacity",0).html(""),Upfront.Events.off("element:settings:saved",i),Upfront.Events.off("element:settings:cancel",o);var n=e("#sidebar-ui");n.length&&n.removeClass("element-settings-activated")}},o=function(){var e=new Upfront.Collections.Properties(s.properties);e._events=n.get("properties")._events,n.set("properties",e),i()},r=function(r,a){var d,l;if(t)return void Upfront.Events.trigger("element:settings:canceled");d=_(Upfront.Application.LayoutEditor.Objects).reduce(function(e,t){return r instanceof t.View?t:e},!1),d=d&&d.Settings?d:Upfront.Views.Editor.Settings,l="undefined"!=typeof a?a:d.Settings,t=new l({model:r.model,anchor:!!d&&d.anchor}),t.for_view=r,t.render(),e("#element-settings-sidebar").html(t.el),e("#element-settings-sidebar").append('<div id="preventElementsUsageOverlay"><span></span></div>'),e("#element-settings-sidebar").width(260).css("opacity",""),e(".uf-settings-panel--expanded:not(:first)").toggleClass("uf-settings-panel--expanded").find(".uf-settings-panel__body").toggle(),Upfront.Events.on("element:settings:saved",i),n=r.model,s=Upfront.Util.model_to_json(r.model),Upfront.Events.once("element:settings:canceled",o),setTimeout(function(){e("#element-settings-sidebar").removeClass("collapsed")},500),Upfront.Events.trigger("element:settings:render");var p=e("#sidebar-ui");p.length&&p.addClass("element-settings-activated")};Upfront.Events.on("element:settings:activate",r),Upfront.Events.on("entity:removed:after",i),Upfront.Events.on("upfront:layout_size:change_breakpoint",i),Upfront.Events.on("upfront:edit_content_style:start",i)})}(jQuery);