upfrontrjs.define(["scripts/upfront/settings/module-factory"],function(e){var t=Backbone.View.extend({initialize:function(t){this.options=t||{};var n=[],i=this,o=this.options.modules;_.isUndefined(o)&&(o=this.modules),"function"==typeof this.getAdditionalModules&&(o=this.getAdditionalModules(_.clone(o))),_.each(o,function(t){t.options=t.options||{},"change"in t.options&&(t.options.preservedChangeCallback||(t.options.preservedChangeCallback=t.options.change),t.options.change=function(e){t.options.preservedChangeCallback(e,i)},Upfront.Events.once("entity:settings:deactivate",function(){t.options.change=t.options.preservedChangeCallback}));var o=e.createModule(t.moduleType,t.options||{},this.options.model);o.panel=this,n.push(o)},this),this.modules=_(n),this.onInitialize&&this.onInitialize(t)},render:function(){this.$el.html(""),this.$el.append('<div class="upfront-settings-item-content"></div>');var e=this.$el.find(".upfront-settings-item-content");this.modules.each(function(t){t.render(),t.delegateEvents(),t.options.noborder===!0&&t.$el.addClass("module_no_border"),e.append(t.el)})},save_settings:function(){if(this.modules){this.modules.each(function(e){e.fields.size()>0&&e.save_fields()})}}});return t});