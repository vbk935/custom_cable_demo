!function(t,o){function n(){var o=((Upfront.data||{}).Compat||{}).notice,n=((Upfront.data||{}).Compat||{}).snapshot_url,a=((Upfront.data||{}).Compat||{}).snapshot_msg||"Install Snapshot",i=n.match(/snapshots_new_panel/)?"has-snapshot":"";return r=function(){return t.post(Upfront.Settings.ajax_url,{action:"upfront-notices-dismiss"})},'<div class="upfront-version_compatibility-nag"><p>'+o+'</p><div><a class="boot '+i+'" href="#boot">Proceed to edit</a>'+(n?'<a class="update '+i+'" href="'+n+'">'+a+"</a>":"")+"</div></div>"}function a(){var t=((Upfront.data||{}).Compat||{}).theme||"your current theme",o=((Upfront.data||{}).Compat||{}).theme_url;return'<div class="upfront-version_compatibility-nag"><p>A new version of <b>'+t+"</b> is available. We recommend you Update <b>"+t+'</b> before making any edits.</p><div><a class="boot" href="#boot">Proceed to edit</a>'+(o?'<a class="update" href="'+o+'">Update '+t+"</a>":"")+"</div></div>"}function i(){var t=((Upfront.data||{}).Compat||{}).snapshot_url||!1;return t?n():a()}function p(){return _nag=t.magnificPopup.open({items:{src:i(),type:"inline"},mainClass:"uf-upgrade-notice"}),t(".upfront-version_compatibility-nag").find('a[href="#boot"]').off("click").on("click",function(o){return o.preventDefault&&o.preventDefault(),o.stopPropagation&&o.stopPropagation(),t.magnificPopup.close(),Upfront.Application.start=e,e.apply(Upfront.Application),r&&"function"==typeof r&&r.apply(this),!1}).end(),!1}var e,r=function(){};!function t(){return((window.Upfront||{}).Events||{}).on?void Upfront.Events.on("application:loaded:layout_editor",function(){e=Upfront.Application.start,Upfront.Application.start=p}):setTimeout(t)}()}(jQuery);