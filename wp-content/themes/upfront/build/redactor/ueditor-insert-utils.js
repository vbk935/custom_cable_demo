!function(t){upfrontrjs.define(["text!scripts/redactor/ueditor-templates.html"],function(e){var a=Upfront.mainData.l10n.global.ueditor,i=_([{vid:"center",label:"Center"},{vid:"left",label:"Left"},{vid:"right",label:"Right"}]),n=Backbone.View.extend({tpl:_.template(t(e).find("#image-style-tpl").html()),initialize:function(t){this.data=new Backbone.Model,this.listenTo(this.data,"change",this.render),this.data.set("variants",i.toArray()),this.data.set("selected",t.get("variant_id")?t.get("variant_id"):"center")},events:{"change input[type=radio]":"update_data","click input[type=radio]":"on_click"},render:function(){return this.$el.html(this.tpl({data:this.data.toJSON()})),this},on_click:function(t){t.stopPropagation()},update_data:function(e){e.stopPropagation(),this.variant_id=t(e.target).val(),this._style=i.findWhere({vid:this.variant_id})}}),l=Backbone.View.extend({tpl:_.template(t(e).find("#image-link-tpl").html()),initialize:function(t){t.data&&(this.model=new Backbone.Model(t.data),this.listenTo(this.model,"change",this.render))},events:{"change input[type=radio]":"updateData"},render:function(){this.$el.width("200px");var t=this.model.toJSON();t.checked='checked="checked"',this.$el.html(this.tpl(t))},updateData:function(t){var e=this,a=this.$("input:checked").val(),i=this.$("#uinsert-image-link-url").val();if("post"==a){var n={postTypes:this.postTypes()};Upfront.Views.Editor.PostSelector.open(n).done(function(t){e.model.set({linkType:"post",linkUrl:t.get("permalink")})})}else this.model.set({linkType:a,linkUrl:i})},postTypes:function(){var t=[];return _.each(Upfront.data.ugallery.postTypes,function(e){"attachment"!=e.name&&t.push({name:e.name,label:e.label})}),t}}),s=Backbone.View.extend({initialize:function(t){this.data=new Backbone.Model,this.data.set("variants",Upfront.Content.ImageVariants.toJSON()),this.data.set("selected",t.get("variant_id"))},events:{},prepare_values:function(){var t=[];return _.each(this.data.get("variants"),function(e,a){t.push({value:e.vid,label:e.label})}),t},get_default_value:function(){return this.data.get("selected")},render:function(){var t=this,e=new Upfront.Views.Editor.Field.Select({className:"upfront-field-wrap upfront-field-wrap-image-style-variant",label:a.choose_image_insert,name:"uf_image_style_variants",default_value:this.get_default_value(),multiple:!1,values:this.prepare_values(),change:function(e){t._style=Upfront.Content.ImageVariants.findWhere({vid:e}),t.data.set("selected",e)}});return e.render(),this.$el.html(e.$el),this},on_click:function(t){t.stopPropagation()}}),r=Backbone.View.extend({className:"upfront-wp-image-style-variants",tpl:_.template(t(e).find("#wp-image-style-tpl").html()),events:{"click .upfront-icon-wp-image-style":"update_data"},get_alignments:function(){return[{id:"alignleft",label:a.align_left,icon:"upfront-icon-wp-image-style-alignleft"},{id:"aligncenter",label:a.align_center,icon:"upfront-icon-wp-image-style-aligncenter"},{id:"alignright",label:a.align_right,icon:"upfront-icon-wp-image-style-alignright"},{id:"alignnone",label:a.align_none,icon:"upfront-icon-wp-image-style-alignnone"}]},initialize:function(t){this.data=new Backbone.Model,this.data.set("variants",this.get_alignments()),this.listenTo(this.data,"change",this.render),this.data.set("selected",this.model.get("variant_id")||this.model.get("style").wrapper.alignment)},get_default_value:function(){return this.data.get("selected")},render:function(){return this.$el.html(this.tpl({data:this.data.toJSON()})),this},on_click:function(t){t.stopPropagation()},update_data:function(e){e.preventDefault();var a=t(e.target),i=a.data("id");this.data.set("selected",i),this.model.set("variant_id",i)}});return{LinkView:l,ImageStylesView:n,PostImageStylesView:s,WP_PostImageStylesView:r,BasicImageVariants:i}})}(jQuery);